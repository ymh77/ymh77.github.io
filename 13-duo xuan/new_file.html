<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			ul{
				width: 300px;
				padding: 0;
				margin: 0;
				margin: 0 auto;
			}
			li{
				list-style: none;
				border-bottom: 1px solid #333;
				height: 30px;
				line-height: 30px;
			}
			
			p{
				width: 300px;
				padding-top: 20px;
				margin: 0 auto;
			}
			.yellow{
				background-color: yellow;
			}
			.red{
				background-color: red;
			}
			.hover{
				background-color: blue;
			}
			
		</style>
		
	</head>
	<body>
		
		<ul>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
		</ul>
		
		<p><input type="checkbox" id="all"/> 全选</p>
		<script type="text/javascript">
			var ul = document.getElementsByTagName('ul')[0];
			var all = document.getElementById('all');
			var li = ul.getElementsByTagName('li');
			var check = ul.getElementsByTagName('input');
			var onOff = true;
			
			for(var i=0;i<li.length;i++){
				if(i%2){
					li[i].className = 'yellow' 
				}else{
					li[i].className = 'red'
				}
				
				li[i].color = li[i].className;
				
				li[i].onmouseover = function(){
					this.className = 'hover';
				}
				li[i].onmouseout = function(){
					this.className = this.color;
				}
				
				check[i].index = i;
				check[i].onclick = function (){
					if(this.checked){
						li[this.index].style.backgroundColor = 'green';
					}else{
						li[this.index].style.backgroundColor = '';
					}
						all.checked = asd();
					
				}
			}
			function asd(){
				for(var i=0;i<check.length;i++){
					if(!check[i].checked){
						return false;
					}
				}
				return true;
			}
			
			
			
			all.onchange = function(){
				for(var i=0;i<check.length;i++){
					if(all.checked){
						check[i].checked = true;
						li[i].style.backgroundColor = 'green';
					}else{
						check[i].checked = false;
						li[i].style.backgroundColor = '';
					}
				}
				
			}
			
			
			
			
			
			
		</script>
		
	</body>
</html>
